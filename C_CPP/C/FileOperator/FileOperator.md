
## 文件操作

### 操作过程

```C

#include <stdio.h>

int main()
{
    int a = 10000;
    // FILE 是一个结构体类型，用来存放文件的名称 大小 类型 等，
    // 这些信息都是通过FILE 结构体指针来维护的，程序读取、写入文件时，文件的信息存放在输入 输出缓冲区内部
    FILE *pf = fopen("test.txt","wb"); // 创建结构体指针存放打开文件的地址，"wb" 写一个二进制文件

    // pf 是打开文件后形成的一个指向文件信息的的结构体指针，一般说是一个流
    if(NULL == pf)
    {
        printf("%s\n",strerror(errno));
        
        return 0;

    }

    fwrite(&a,sizeof(a),1,pf); // 二进制写操作,将 a 这样大小的数据 一个放到流 pf 中，返回 a 元素
    fclose(pf);
    pf = NULL;

    return 0;
}

```

- FILE *fopen (const char *filename, const char *modes)
  - filename 可以是绝对路径 或者 相对路径 的文件名
    - "c:\files\test.txt", 其中\test 的 \t 是tab 缩进的功能，可以使用多一个 \ 强制转换，"c:\\\files\\\test.txt"
  - modes 


|  | modes 可供选择的模式（注意：" " 不是 ' '） | |
|---:|---:|---:|
| 文件使用方式 | 含义 |如果指定文件不存在|
|“r”（只读）| 为了输入数据，打开一个已经存在的文本文件 | 出错，返回一个 FILE类型指针 NULL|
|“w”（只写） | 为了输出数据，打开一个文本文件 | 建立一个新的文件，覆盖已存在的同名文件|
|“a”（追加）| 向文本文件尾添加数据 | 建立一个新的文件|
|“wb”（只写） | 为了向流中输入数据，打开一个已经存在的二进制文件流 | 建立一个新的文件，覆盖已存在的同名文件|
|“rb”（只读） | 为了从流中输出数据，打开一个已经存在的二进制文件流 | 出错，返回一个 FILE类型指针 NULL|
|“r+”（读写） | 为了读和写，打开一个文本文件 | 出错 |
|“w+”（读写）| 为了读和写，新建一个文本文件 | 建立一个新的文件，覆盖已存在的同名文件 |

![](../FileOperator/in_out_BufferArea.png)


- FILE 是一个结构体类型，用来存放文件的名称 大小 类型 等，这些信息都是通过FILE 结构体指针来维护的，程序读取、写入文件时，文件的信息存放在输入 输出缓冲区内部
- FILE 定义的 指针变量 接收的是一个打开的流
- stderr:  标准错误流
- 键盘 - 标准输入设备，默认输入流： stdin
- 显示器 - 标准输出设备，默认的输出流: stdout
  ```C
  
  int ch = fgetc(stdin);
  fputc(ch,stdout);
  
  ```

### 文件的顺序读写

- 注意：函数读写后，打印时是否有换行

| |文件的顺序读写 | |
|---:|---:|---:|
|功能 | 函数名 | 适用于 |
|从流中读字符 函数 | fgetc | 所有输入流 |
|字符写入到流 函数 | fputc | 所有输出流 |
|从流中读文本行 函数 | fgets | 所有输入流 |
|文本行写入到流 函数 | fputs | 所有输出流 |
|从流中读取格式化内容 函数 | fscanf | 所有输入流 |
|写入（打印）格式化内容到流 函数 | fprintf | 所有输出流 |
|从流中读取二进制文件 | fread | 文件 |
|写入二进制文件到流中 | fwrite | 文件 |